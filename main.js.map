{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/scripts/card.js","webpack://mesto-project-ff/./src/scripts/modal.js","webpack://mesto-project-ff/./src/scripts/validation.js","webpack://mesto-project-ff/./src/scripts/api.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["const cardTemplate = document.querySelector(\"#card-template\").content;\r\nfunction createCard(cardData, clickDelete, clickImg, clickLike, userId) {\r\n  const placesItem = cardTemplate.querySelector(\".places__item\").cloneNode(true);\r\n  const deleteButton = placesItem.querySelector(\".card__delete-button\");\r\n  const cardLikeButton = placesItem.querySelector(\".card__like-button\");\r\n\r\n  const cardTitle = placesItem.querySelector(\".card__title\");\r\n  const cardImage = placesItem.querySelector(\".card__image\");\r\n  const cardLikeCount = placesItem.querySelector(\".card__like-counter\");\r\n  const cardId = cardData._id;\r\n\r\n  cardTitle.textContent = cardData.name;\r\n  cardImage.src = cardData.link;\r\n  cardImage.alt = cardData.name;\r\n  cardLikeCount.textContent = cardData.likes.length;\r\n\r\n  const handleLike = cardData.likes\r\n    .map(function (likeObj) {\r\n      return likeObj._id;\r\n    })\r\n    .includes(userId);\r\n  if (handleLike) {\r\n    cardLikeButton.classList.toggle(\"card__like-button_is-active\");\r\n  }\r\n\r\n  const allowDelete = userId == cardData.owner._id;\r\n  if (allowDelete) {\r\n    deleteButton.classList.add(\"card__delete-button-active\");\r\n  }\r\n\r\n  deleteButton.addEventListener(\"click\", () => clickDelete(placesItem, cardId));\r\n  cardImage.addEventListener(\"click\", () =>\r\n    clickImg({ name: cardData.name, link: cardData.link })\r\n  );\r\n  cardLikeButton.addEventListener(\"click\", () =>\r\n    clickLike(cardId, cardLikeButton, cardLikeCount)\r\n  );\r\n\r\n  return placesItem;\r\n}\r\n\r\n// меняет состояние кнопки лайка\r\n// function downLike(cardLike) {\r\n//   const targetClass = \"card__like-button_is-active\";\r\n//   cardLike.classList.toggle(targetClass);\r\n//   // Возвращает true если кнопка активна, иначе false\r\n//   return cardLike.classList.contains(\"card__like-button_is-active\");\r\n// }\r\n\r\n\r\n// Проверяет, был ли лайк на карточке\r\nexport function isLiked(cardLikeButton) {\r\n  return cardLikeButton.classList.contains(\"card__like-button_is-active\");\r\n}\r\n\r\n// Ставит лайк \r\nfunction activateLike(cardLikeButton) {\r\n  cardLikeButton.classList.add(\"card__like-button_is-active\");\r\n}\r\n\r\n// Убирает лайк \r\nfunction deactivateLike(cardLikeButton) {\r\n  cardLikeButton.classList.remove(\"card__like-button_is-active\");\r\n}\r\n\r\n// меняет счетчик лайков\r\nfunction setLikeCounter(cardLikeCount, likesNum) {\r\n  cardLikeCount.textContent = likesNum;\r\n}\r\n\r\n//  удаление карточки с формы\r\nfunction deleteCardFunc(cardElement) {\r\n  cardElement.remove();\r\n}\r\n\r\nexport { createCard, deleteCardFunc,  setLikeCounter, activateLike, deactivateLike};\r\n","function openModal(element) {\r\n  element.classList.add(\"popup_is-opened\");\r\n  document.addEventListener(\"keydown\", EscClose);\r\n}\r\n\r\nfunction EscClose(evt) {\r\n  if (evt.key === \"Escape\") {\r\n    const openedPopup = document.querySelector(\".popup_is-opened\");\r\n    closeModal(openedPopup);\r\n  }\r\n}\r\n\r\nfunction closeModal(element) {\r\n  element.classList.remove(\"popup_is-opened\");\r\n  document.removeEventListener(\"keydown\", EscClose);\r\n}\r\n\r\nexport { openModal, closeModal };\r\n","// элемент и текст ошибки вторым параметром\r\nconst showInputError = (\r\n  formElement,\r\n  inputElement,\r\n  errorMessage,\r\n  validationConfig\r\n) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.add(validationConfig.inputErrorClass);\r\n  errorElement.textContent = errorMessage;\r\n  errorElement.classList.add(validationConfig.errorClass);\r\n};\r\n\r\n// Функция, которая удаляет класс с ошибкой\r\nconst hideInputError = (formElement, inputElement, validationConfig) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.remove(validationConfig.inputErrorClass);\r\n  errorElement.classList.remove(validationConfig.errorClass);\r\n  errorElement.textContent = \"\";\r\n};\r\n\r\n// проверяет валидность полей, задаем элемент формы и инпута внутри\r\nconst checkInputValidity = (formElement, inputElement, validationConfig) => {\r\n  if (inputElement.validity.patternMismatch) {\r\n    // выводит кастомное сообщение\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  } else {\r\n    inputElement.setCustomValidity(\"\");\r\n  }\r\n\r\n  if (!inputElement.validity.valid) {\r\n    // Передает сообщение об ошибке вторым аргументом\r\n    showInputError(\r\n      formElement,\r\n      inputElement,\r\n      inputElement.validationMessage,\r\n      validationConfig\r\n    );\r\n  } else {\r\n    hideInputError(formElement, inputElement, validationConfig);\r\n  }\r\n};\r\n\r\n// принимает массив полей формы и возвращает true если в нём хотя бы одно не валидно, и false если все валидны\r\nconst hasInvalidInput = (inputList) => {\r\n  return inputList.some((inputElement) => {\r\n    // Если поле не валидно, колбэк вернёт true. Обход массива прекратится и вся функция hasInvalidInput вернёт true\r\n    return !inputElement.validity.valid;\r\n  });\r\n};\r\n\r\n// принимает массив полей и элемент кнопки\r\nconst toggleButtonState = (inputList, buttonElement, validationConfig) => {\r\n  // если есть хоть один невалидный инпут\r\n  if (hasInvalidInput(inputList)) {\r\n    // сделай кнопку неактивной\r\n    buttonElement.classList.add(validationConfig.inactiveButtonClass);\r\n    buttonElement.setAttribute(\"disabled\", \"true\");\r\n  } else {\r\n    // иначе сделай активной\r\n    buttonElement.classList.remove(validationConfig.inactiveButtonClass);\r\n    buttonElement.removeAttribute(\"disabled\");\r\n  }\r\n};\r\n\r\n// слушатель для ввсех инпутов\r\nconst setEventListeners = (formElement, validationConfig) => {\r\n  // находим все инпуты и кнопки\r\n  const inputList = Array.from(\r\n    formElement.querySelectorAll(validationConfig.inputSelector)\r\n  );\r\n  const buttonElement = formElement.querySelector(\r\n    validationConfig.submitButtonSelector\r\n  );\r\n  // меняет кнопку\r\n  toggleButtonState(inputList, buttonElement, validationConfig);\r\n  inputList.forEach((inputElement) => {\r\n    // добавляет слушателя для каждого\r\n    inputElement.addEventListener(\"input\", function () {\r\n      checkInputValidity(formElement, inputElement, validationConfig);\r\n      toggleButtonState(inputList, buttonElement, validationConfig);\r\n    });\r\n  });\r\n};\r\n\r\n// валидация всех форм\r\nconst enableValidation = (validationConfig) => {\r\n  const formList = Array.from(\r\n    document.querySelectorAll(validationConfig.formSelector)\r\n  );\r\n  formList.forEach((formElement) => {\r\n    formElement.addEventListener(\"submit\", function (evt) {\r\n      evt.preventDefault();\r\n    });\r\n    setEventListeners(formElement, validationConfig);\r\n  });\r\n};\r\n\r\n// очищает ошибки форм\r\nconst clearValidation = (formElement, validationConfig) => {\r\n  const inputList = Array.from(\r\n    formElement.querySelectorAll(validationConfig.inputSelector)\r\n  );\r\n  const buttonElement = formElement.querySelector(\r\n    validationConfig.submitButtonSelector\r\n  );\r\n  inputList.forEach((inputElement) => {\r\n    hideInputError(formElement, inputElement, validationConfig);\r\n  });\r\n  toggleButtonState(inputList, buttonElement, validationConfig);\r\n};\r\n\r\nexport { enableValidation, clearValidation };\r\n\r\nconst validationConfig = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inactiveButtonClass: \"popup__button_disabled\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  errorClass: \"popup__input-error_active\",\r\n};\r\n\r\nexport { validationConfig };\r\n","const apiConfig = {\r\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-38/\",\r\n  headers: {\r\n    authorization: \"876e3de4-4442-4286-83e5-5c1ffc2cb0cf\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n\r\nconst handleResponse = (res) => {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return Promise.reject(`Ошибка: ${res.status}`);\r\n};\r\n\r\nexport const profileData = () => {\r\n  return fetch(`${apiConfig.baseUrl}/users/me`, {\r\n    headers: {\r\n      authorization: `${apiConfig.headers.authorization}`,\r\n    },\r\n  }).then(handleResponse);\r\n};\r\n\r\nexport const initialCards = () => {\r\n  return fetch(`${apiConfig.baseUrl}/cards`, {\r\n    headers: {\r\n      authorization: `${apiConfig.headers.authorization}`,\r\n    },\r\n  }).then(handleResponse);\r\n};\r\n\r\nexport const editProfileApi = (userData) => {\r\n  return fetch(`${apiConfig.baseUrl}/users/me`, {\r\n    method: \"PATCH\",\r\n    headers: apiConfig.headers,\r\n    body: JSON.stringify(userData),\r\n  }).then(handleResponse);\r\n};\r\n\r\nexport const newCardApi = (dataCard) => {\r\n  console.log(\"request\", JSON.stringify(dataCard));\r\n  return fetch(`${apiConfig.baseUrl}/cards`, {\r\n    method: \"POST\",\r\n    headers: apiConfig.headers,\r\n    body: JSON.stringify(dataCard),\r\n  }).then(handleResponse);\r\n};\r\n\r\nexport const deleteCardApi = (cardId) => {\r\n  return fetch(`${apiConfig.baseUrl}/cards/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: {\r\n      authorization: `${apiConfig.headers.authorization}`,\r\n    },\r\n  }).then(handleResponse);\r\n};\r\n\r\nexport const likeCardApi = (cardId) => {\r\n  return fetch(`${apiConfig.baseUrl}/cards/likes/${cardId}`, {\r\n    method: \"PUT\",\r\n    headers: apiConfig.headers,\r\n    body: JSON.stringify(),\r\n  }).then(handleResponse);\r\n};\r\n\r\nexport const dislikeCardApi = (cardId) => {\r\n  return fetch(`${apiConfig.baseUrl}/cards/likes/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: {\r\n      authorization: `${apiConfig.headers.authorization}`,\r\n    },\r\n  }).then(handleResponse);\r\n};\r\n\r\nexport const editAvatarApi = (avatar) => {\r\n  return fetch(`${apiConfig.baseUrl}/users/me/avatar`, {\r\n    method: \"PATCH\",\r\n    headers: apiConfig.headers,\r\n    body: JSON.stringify(avatar),\r\n  }).then(handleResponse);\r\n};\r\n","import \"./pages/index.css\";\r\nimport {\r\n  createCard,\r\n  deleteCardFunc,\r\n  setLikeCounter,\r\n  isLiked,\r\n  activateLike,\r\n  deactivateLike,\r\n} from \"./scripts/card.js\";\r\nimport { openModal, closeModal } from \"./scripts/modal.js\";\r\nimport {\r\n  enableValidation,\r\n  clearValidation,\r\n  validationConfig,\r\n} from \"./scripts/validation.js\";\r\nimport {\r\n  profileData,\r\n  initialCards,\r\n  editProfileApi,\r\n  newCardApi,\r\n  deleteCardApi,\r\n  editAvatarApi,\r\n  likeCardApi,\r\n  dislikeCardApi,\r\n} from \"./scripts/api.js\";\r\n\r\nconst placesList = document.querySelector(\".places__list\");\r\nconst popupList = document.querySelectorAll(\".popup\");\r\n\r\n// кнопки вызова попапов\r\nconst profileEditButton = document.querySelector(\".profile__edit-button\");\r\nconst profileAddButton = document.querySelector(\".profile__add-button\");\r\nconst profileImgEditButton = document.querySelector(\".profile__image\");\r\n\r\n// попапы редактирования, добавления и удаления карточки\r\nconst popupEdit = document.querySelector(\".popup_type_edit\");\r\nconst popupNewCard = document.querySelector(\".popup_type_new-card\");\r\nconst popupDeleteCard = document.querySelector(\".popup_type_delete-card\");\r\nconst popupAvatarEdit = document.querySelector(\".popup_type_edit-img\");\r\n\r\nconst deleteCardButton = document.querySelector(\r\n  \".popup_type_delete-card__button\"\r\n);\r\n\r\n// попап с картинкой и элементы\r\nconst popupTypeImage = document.querySelector(\".popup_type_image\");\r\nconst popupImg = popupTypeImage.querySelector(\".popup__image\");\r\nconst popupCaption = popupTypeImage.querySelector(\".popup__caption\");\r\n\r\n// форма добавления карточки и элементы\r\nconst formAddCards = document.forms.newPlace;\r\nconst placeInput = formAddCards.elements.placeName;\r\nconst linkInput = formAddCards.elements.link;\r\n\r\n// форма редактирования и элементы\r\nconst formEditProfile = document.forms.editProfile;\r\nconst nameProfileInput = formEditProfile.elements.name;\r\nconst jobProfileInput = formEditProfile.elements.description;\r\n\r\n// форма обновления аватара\r\nconst formEditAvatar = document.forms.editProfileAvatar;\r\nconst avatarLinkInput = formEditAvatar.elements.avatar;\r\n\r\n// элементы профиля\r\nconst profileTitle = document.querySelector(\".profile__title\");\r\nconst profileDescription = document.querySelector(\".profile__description\");\r\nconst profileImage = document.querySelector(\".profile__image\");\r\n\r\nlet userId = null;\r\nlet idCardForDelete = null;\r\nlet cardForDelete = null;\r\n\r\nenableValidation(validationConfig);\r\n\r\n// Создает карточки и загружаем UserInfo\r\nPromise.all([profileData(), initialCards()])\r\n  .then(([userData, cards]) => {\r\n    profileImage.style.backgroundImage = `url(${userData.avatar})`;\r\n    profileTitle.textContent = userData.name;\r\n    profileDescription.textContent = userData.about;\r\n    userId = userData._id;\r\n    cards.forEach(function (cardData) {\r\n      const currentCard = createCard(\r\n        cardData,\r\n        handleDeleteCard,\r\n        openCardFunc,\r\n        handleLikeCard,\r\n        userId\r\n      );\r\n      placesList.append(currentCard);\r\n    });\r\n  })\r\n  .catch((err) => {\r\n    console.log(\"Ошибка. Запрос не выполнен\", err);\r\n  }); // если что-то не так\r\n\r\n// открывает попап с картинкой\r\nfunction openCardFunc({ name, link }) {\r\n  popupImg.src = link;\r\n  popupImg.alt = name;\r\n  popupCaption.textContent = name;\r\n  openModal(popupTypeImage);\r\n}\r\n\r\n// сохраняет новую карточку\r\nfunction handleImgSubmit(evt) {\r\n  evt.preventDefault();\r\n  savingButtonText(popupNewCard);\r\n  const newCardData = {\r\n    name: placeInput.value,\r\n    link: linkInput.value,\r\n  };\r\n\r\n  newCardApi(newCardData)\r\n    .then((res) => {\r\n      const newCard = createCard(\r\n        res,\r\n        handleDeleteCard,\r\n        openCardFunc,\r\n        handleLikeCard,\r\n        userId\r\n      );\r\n      placesList.prepend(newCard);\r\n      formAddCards.reset();\r\n      closeModal(popupNewCard);\r\n      saveButtonText(popupNewCard);\r\n    })\r\n    .catch((err) => {\r\n      console.log(\"Ошибка. Запрос не выполнен\", err);\r\n    })\r\n    .finally(() => {\r\n      saveButtonText(popupNewCard);\r\n    });\r\n}\r\n\r\nformAddCards.addEventListener(\"submit\", handleImgSubmit);\r\n\r\n// слушатель на кнопке \"добавить картинку\"\r\nprofileAddButton.addEventListener(\"click\", () => {\r\n  openModal(popupNewCard);\r\n  clearValidation(formAddCards, validationConfig);\r\n});\r\n\r\n// открывает модалку редактирования аватара\r\nprofileImgEditButton.addEventListener(\"click\", () => {\r\n  openModal(popupAvatarEdit);\r\n  clearValidation(formEditAvatar, validationConfig);\r\n});\r\n\r\n// редактирование аватарки\r\nfunction handleAvatarSubmit(evt) {\r\n  evt.preventDefault();\r\n  savingButtonText(popupAvatarEdit);\r\n  const profileAvatarLink = { avatar: avatarLinkInput.value };\r\n  editAvatarApi(profileAvatarLink)\r\n    .then((res) => {\r\n      profileImage.style.backgroundImage = `url(${res.avatar})`;\r\n      closeModal(popupAvatarEdit);\r\n      saveButtonText(popupAvatarEdit);\r\n    })\r\n    .catch((err) => {\r\n      console.log(\"Ошибка. Запрос не выполнен\", err);\r\n    })\r\n    .finally(() => {\r\n      saveButtonText(popupAvatarEdit);\r\n    });\r\n}\r\n\r\nformEditAvatar.addEventListener(\"submit\", handleAvatarSubmit);\r\n\r\n// сохраняет введенные данные\r\nfunction handleFormEditSubmit(evt) {\r\n  evt.preventDefault();\r\n  savingButtonText(popupEdit);\r\n\r\n  const dataEditForm = {\r\n    name: nameProfileInput.value,\r\n    about: jobProfileInput.value,\r\n  };\r\n  editProfileApi(dataEditForm)\r\n    .then((res) => {\r\n      profileTitle.textContent = res.name;\r\n      profileDescription.textContent = res.about;\r\n    })\r\n    .then(() => {\r\n      closeModal(popupEdit);\r\n      saveButtonText(popupEdit);\r\n    })\r\n    .catch((err) => {\r\n      console.log(\"Ошибка. Запрос не выполнен\", err);\r\n    })\r\n    .finally(() => {\r\n      saveButtonText(popupEdit);\r\n    });\r\n}\r\n\r\nformEditProfile.addEventListener(\"submit\", handleFormEditSubmit);\r\n\r\n// вбивает данные со страницы в попап\r\nprofileEditButton.addEventListener(\"click\", () => {\r\n  openModal(popupEdit);\r\n  nameProfileInput.value = profileTitle.textContent;\r\n  jobProfileInput.value = profileDescription.textContent;\r\n  clearValidation(formEditProfile, validationConfig);\r\n});\r\n\r\n// закрывает попап кликом\r\npopupList.forEach((popup) => {\r\n  popup.addEventListener(\"click\", (evt) => {\r\n    if (\r\n      evt.target.classList.contains(\"popup__close\") ||\r\n      evt.target.classList.contains(\"popup\")\r\n    ) {\r\n      closeModal(popup);\r\n    }\r\n  });\r\n});\r\n\r\n// Слушатель на подтверждение удаления карточки\r\ndeleteCardButton.addEventListener(\"click\", () => {\r\n  deleteCardApi(idCardForDelete)\r\n    .then(() => {\r\n      deleteCardFunc(cardForDelete);\r\n      closeModal(popupDeleteCard);\r\n      idCardForDelete = null;\r\n      cardForDelete = null;\r\n    })\r\n    .catch((err) => {\r\n      console.log(\"Ошибка. Запрос не выполнен\", err);\r\n    });\r\n});\r\n\r\n// Инициализация удаления карточки\r\nfunction handleDeleteCard(cardElement, cardId) {\r\n  idCardForDelete = cardId;\r\n  cardForDelete = cardElement;\r\n  openModal(popupDeleteCard);\r\n}\r\n\r\n// Обработка нажатия кнопки Like\r\nfunction handleLikeCard(cardId, cardLikeButton, cardLikeCount) {\r\n  const handleLike = isLiked(cardLikeButton);\r\n\r\n  const res_promise = handleLike ? dislikeCardApi(cardId) : likeCardApi(cardId);\r\n  res_promise\r\n    .then((res) => {\r\n      if (handleLike) {\r\n        deactivateLike(cardLikeButton);\r\n      } else {\r\n        activateLike(cardLikeButton);\r\n      }\r\n      setLikeCounter(cardLikeCount, res.likes.length);\r\n    })\r\n    .catch((err) => {\r\n      console.error(\"Ошибка при изменении лайка:\", err);\r\n    });\r\n}\r\n\r\n//меняем текст кнопки сохранения\r\nconst savingButtonText = (element) => {\r\n  element.querySelector(\".popup__button\").textContent = \"Сохранение...\";\r\n};\r\n\r\nconst saveButtonText = (element) => {\r\n  element.querySelector(\".popup__button\").textContent = \"Сохранить\";\r\n};\r\n"],"names":["cardTemplate","document","querySelector","content","createCard","cardData","clickDelete","clickImg","clickLike","userId","placesItem","cloneNode","deleteButton","cardLikeButton","cardTitle","cardImage","cardLikeCount","cardId","_id","textContent","name","src","link","alt","likes","length","map","likeObj","includes","classList","toggle","owner","add","addEventListener","openModal","element","EscClose","evt","key","closeModal","remove","removeEventListener","hideInputError","formElement","inputElement","validationConfig","errorElement","concat","id","inputErrorClass","errorClass","toggleButtonState","inputList","buttonElement","some","validity","valid","hasInvalidInput","inactiveButtonClass","removeAttribute","setAttribute","clearValidation","Array","from","querySelectorAll","inputSelector","submitButtonSelector","forEach","formSelector","apiConfig","baseUrl","headers","authorization","handleResponse","res","ok","json","Promise","reject","status","placesList","popupList","profileEditButton","profileAddButton","profileImgEditButton","popupEdit","popupNewCard","popupDeleteCard","popupAvatarEdit","deleteCardButton","popupTypeImage","popupImg","popupCaption","formAddCards","forms","newPlace","placeInput","elements","placeName","linkInput","formEditProfile","editProfile","nameProfileInput","jobProfileInput","description","formEditAvatar","editProfileAvatar","avatarLinkInput","avatar","profileTitle","profileDescription","profileImage","idCardForDelete","cardForDelete","openCardFunc","_ref3","handleDeleteCard","cardElement","handleLikeCard","handleLike","contains","isLiked","res_promise","fetch","method","then","dislikeCardApi","body","JSON","stringify","likeCardApi","deactivateLike","activateLike","likesNum","setLikeCounter","catch","err","console","error","preventDefault","patternMismatch","setCustomValidity","dataset","errorMessage","showInputError","validationMessage","checkInputValidity","setEventListeners","enableValidation","all","_ref","_ref2","userData","cards","style","backgroundImage","about","currentCard","append","log","dataCard","savingButtonText","value","newCard","prepend","reset","saveButtonText","finally","popup","target"],"sourceRoot":""}